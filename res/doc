# nickel-menu-inject (libnmi.so)
#
# This tool injects menu items into Nickel.
#
# It should work on firmware 4.6+, but it has only been tested on 4.20.14622. It
# is perfectly safe to try out on any newer firmware version, as it has a lot of
# error checking, and a failsafe mechanism which automatically uninstalls it as
# a last resort.
#
# Place your configuration files in this folder (/mnt/onboard/.kobo/.adds/nmi).
# They can be named anything, and should consist of multiple lines either
# starting with # for a comment, or in the the following format:
#
#   menu_item:<location>:<label>:<action>:<arg>
#     Adds a menu item (spaces around fields are ignored).
#
#     <location>  the menu to add the item to, one of:
#                   main   - the menu in the top-left corner of the home screen
#                   reader - the overflow menu in the reader
#     <label>     the label to show on the menu item (must not contain :)
#     <action>    the type of action to run, one of:
#                   dbg_syslog     - writes a message to syslog (for testing)
#                   dbg_error      - always returns an error (for testing)
#                   kfmon          - triggers a kfmon action (coming soon)
#                   nickel_setting - toggles a boolean setting (coming soon)
#     <arg>       the argument passed to the action:
#                   dbg_syslog     - the text to write
#                   dbg_error      - the error message
#                   kfmon          - TODO
#                   nickel_setting - one of:
#                                      invert      - toggles FeatureSettings.InvertScreen (all versions)
#                                      screenshots - toggles FeatureSettings.Screenshots (all versions)
#
# For example, you might have a configuration file in KOBOeReader/.adds/nmi/mystuff like:
#
#   menu_item :main   :Show an error :dbg_error      :This is an error message!
#   menu_item :reader :Invert Screen :nickel_setting :invert
#
# If there is a error in the configuration, an item which displays it will be
# added to the main menu. If an internal error occurs, it is written to syslog,
# which can be viewed over telnet or SSH (the username is root) with the command
# logread.
#
# To uninstall nickel-menu-inject, create a file named KOBOeReader/.adds/nmi/uninstall,
# or manually uninstall it by deleting libnmi.so. You can also uninstall it by
# triggering the failsafe mechanism by turning your Kobo off within 20 seconds
# of turning it on. 